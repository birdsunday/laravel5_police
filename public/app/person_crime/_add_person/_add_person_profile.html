

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document" style="width: auto">
        <div class="modal-content" >
            <div class="modal-header">
               <h3>ข้อมูลบุคคลทั่วไป ที่มีเลขบัตร <% person.idcard %></h3>
            </div>
            <div class="modal-body">
                <div ng-include="'/app/person_crime/_viewdata_person_general.html'"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="exampleModa2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document" style="width: auto">
        <div class="modal-content" >
            <div class="modal-header">
              <h3>ข้อมูลบุคคลที่เกี่ยวข้องกับอาชญากรรม ที่มีเลขบัตร <% person.idcard %></h3>
            </div>
            <div class="modal-body">
                <div ng-include="'/app/person_crime/_viewdata_person_crime.html'"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>


      <div class="row">
          <div class="col-xs-12 col-sm-12">
              <div class="box">

                  <div class="box-content">
                      <h4 class="page-header">ข้อมูลส่วนตัว</h4>
                      <form class="form-horizontal" role="form">

                          <div class="form-group">
                              <label class="col-sm-4 control-label" style="width: auto">หมายเลขบัตร</label>

                              <div class="col-sm-6">
                                  <input  onkeyup="autoTab(this)" ng-change="searchDataPerson(person)" ng-model="person.idcard" type="" class="form-control">

                                  <label  ng-if="dataperson_crime.length" class="control-label" style="width: auto;color: red"> บุลคลนี้เคยมีประวัติเกี่ยวข้องกับอาชญากรรมแล้ว</label>

                                  <button ng-if="dataperson_crime.length" type="button" class="btn btn-primary" data-toggle="modal"
                                          data-target="#exampleModa2" data-whatever="@mdo">ดูข้อมูล</button>

                                  <label  ng-if="dataperson_general.length" class="control-label" style="width: auto;color: red"> บุลคลนี้เคยมีประวัติทั่วไปแล้ว</label>
                                  <button ng-if="dataperson_general.length" type="button" class="btn btn-primary" data-toggle="modal"
                                          data-target="#exampleModal" data-whatever="@mdo">ดูข้อมูล</button>




                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">ประเภทบุคคล</label>

                              <div class="col-sm-3">
                                  <input ng-model="person.typepeople" type="text" class="form-control">
                              </div>




                          </div>

                          <div class="form-group">
                              <label class="col-sm-1 control-label" style="width: auto">คำนำหน้า</label>

                              <div class="col-sm-2">
                                  <select ng-model="person.nametitle" class="form-control css-require" ng-options="opt as opt.name_title for opt in nametitles">
                                  </select>
                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">ชื่อ</label>

                              <div class="col-sm-4">
                                  <input ng-model="person.name" type="text" class="form-control">
                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">ชื่อสกุล</label>

                              <div class="col-sm-3">
                                  <input ng-model="person.surname" type="text" class="form-control">
                              </div>
                          </div>



                          <div class="form-group">
                              <label class="col-sm-1 control-label" style="width: auto">นามเเฝง</label>

                              <div class="col-sm-3">
                                  <input ng-model="person.alias" type="text" class="form-control">

                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">ว/ด/ป เกิด</label>

                              <div class="col-sm-3">
                                  <input ng-model="person.birth" type="text" class="form-control" name="mydateth" id="mydateth" >

                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">อาชีพ</label>

                              <div class="col-sm-3">
                                  <input type="text" ng-model="person.career" class="form-control" >
                              </div>

                          </div>

                          <div class="form-group">

                              <label class="col-sm-1 control-label" style="width: auto">วันที่จับกุม</label>

                              <div class="col-sm-3">
                                  <input ng-model="person.date" type="text" class="form-control css_datetime_picker" name="date_product[]" value="" id="id_datetime_picker0" >
                              </div>
                              <label class="col-sm-1 control-label" style="width: auto">การศึกษา</label>

                              <div class="col-sm-3">
                                  <input type="text" ng-model="person.education" class="form-control" >
                              </div>

                          </div>

                      </form>
                  </div>
              </div>
          </div>
      </div>

<script type="text/javascript">
    $(function () {


        $("#id_datetime_picker0").datetimepicker({
            format:'d-m-Y H:m',
            lang:'th',  // แสดงภาษาไทย
            yearOffset:543,  // ใช้ปี พ.ศ. บวก 543 เพิ่มเข้าไปในปี ค.ศ
            closeOnDateSelect:true
        });


        $(".css_i_select").on("change",function(){
            var i_select=$(this).val();
            if(i_select=="A"){
                $(this).parents("tr").find(".css_more").show();
            }else{
                $(this).parents("tr").find(".css_more").hide();
            }
        });


        $("#addRow").on("click",function(){
            // ส่วนของการ clone ข้อมูลด้วย jquery clone() ค่า true คือ
            // การกำหนดให้ ไม่ต้องมีการ ดึงข้อมูลจากค่าเดิมมาใช้งาน
            // รีเซ้ตเป็นค่าว่าง ถ้ามีข้อมูลอยู่แล้ว ทั้ง select หรือ input

            $(".datarow:eq(0)").clone(true)
                    .find("input").attr("value","").end()
                    .find("select").attr("value","").end()  //
                    .appendTo($(".place-datarow"));
            var lastIndex=$(".css_datetime_picker").size()-1; // หา index ของตัว input ล่าสุด
            var newId="id_datetime_picker"+lastIndex;
            var objID="#"+newId;
            var placeParent=$(".css_datetime_picker:eq("+lastIndex+")").parents("td");
            // แทนด้วย input ใหม่ ทับตัวเก่าไปเลย
            $(placeParent).html("<input type=\"text\" class=\"form-control css_datetime_picker\" name=\"date_product[]\" >");
            $(".css_datetime_picker:eq("+lastIndex+")")
                    .attr("id", newId) // - กำหนด id เป็นค่าใหม่
                    .unbind(); // - ยกเลิกการจัดการทั้งหมด ที่ได้มาจากตัว clone
            $(objID).datetimepicker(); // - เรียกใช้ datetimepicker() ใหม่อีกครั้ง

        });


    });
</script>

<script type="text/javascript">
    $(function(){


        $("#mydateth").datetimepicker({
            timepicker:false,  // กำหนด ไม่แสดงตัวเลือกเวลา
            format:'d-m-Y',  // กำหนดรูปแบบวันที่ ที่ใช้ เป็น 00-00-0000
            lang:'th',  // แสดงภาษาไทย
            yearStart:1914,  // ช่วงเลือกปีเริ่มต้น ใช้ ค.ศ.
            yearOffset:543,  // ใช้ปี พ.ศ. บวก 543 เพิ่มเข้าไปในปี ค.ศ

            closeOnDateSelect:true // ปิด ถ้าเลือกวันที่แล้ว
        });



    });
</script>